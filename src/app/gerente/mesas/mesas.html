<div class="gerente-mesas">
  <main class="content">
    <div class="page-header">
      <h2>ğŸª‘ Gerenciar Mesas</h2>
      <button class="btn-primary" (click)="abrirFormulario()">
        â• Nova Mesa
      </button>
    </div>

    <div class="loading" *ngIf="carregando">
      Carregando mesas...
    </div>

    <div class="mesas-grid" *ngIf="!carregando && mesas.length > 0">
      <div class="mesa-card" *ngFor="let mesa of mesas" [class.inativa]="!mesa.ativo">
        <div class="mesa-header">
          <h3>Mesa {{ mesa.numero }}</h3>
          <span class="badge" [ngClass]="getStatusClass(mesa.status)">
            {{ getStatusLabel(mesa.status) }}
          </span>
        </div>
        <div class="mesa-info">
          <p><strong>Capacidade:</strong> {{ mesa.capacidade }} pessoas</p>
          <p><strong>Status:</strong> {{ mesa.ativo ? 'Ativa' : 'Inativa' }}</p>
        </div>
        <div class="mesa-acoes">
          <button class="btn-icon" (click)="editarMesa(mesa)" title="Editar">
            âœï¸
          </button>
          <button class="btn-icon" (click)="toggleMesaAtiva(mesa)" [title]="mesa.ativo ? 'Desabilitar' : 'Habilitar'">
            {{ mesa.ativo ? 'ğŸ”´' : 'ğŸŸ¢' }}
          </button>
          <button class="btn-icon" (click)="deletarMesa(mesa.id!)" title="Deletar">
            ğŸ—‘ï¸
          </button>
        </div>
      </div>
    </div>

    <div class="empty" *ngIf="!carregando && mesas.length === 0">
      <p>Nenhuma mesa cadastrada ainda</p>
      <button class="btn-primary" (click)="abrirFormulario()">Adicionar Primeira Mesa</button>
    </div>
  </main>

	  <!-- Modal de FormulÃ¡rio -->
	  <div class="modal-overlay" *ngIf="mostrarFormulario" (click)="fecharFormulario()">
	    <div class="modal" (click)="$event.stopPropagation()">
	      <div class="modal-header">
	        <h3>{{ editando ? 'Editar Mesa' : 'Nova Mesa' }}</h3>
	        <button class="btn-close" (click)="fecharFormulario()">âœ•</button>
	      </div>
	      
	      <form class="form" (ngSubmit)="salvarMesa()">
	        <div class="modal-body">
	          <div class="form-group">
	            <label for="numero">NÃºmero da Mesa *</label>
	            <input 
	              type="number" 
	              id="numero" 
	              [(ngModel)]="mesaAtual.numero" 
	              name="numero"
	              min="1"
	              required
	            />
	          </div>

	          <div class="form-group">
	            <label for="capacidade">Capacidade *</label>
	            <input 
	              type="number" 
	              id="capacidade" 
	              [(ngModel)]="mesaAtual.capacidade" 
	              name="capacidade"
	              min="1"
	              required
	            />
	          </div>

	          <div class="form-group">
	            <label for="status">Status</label>
	            <select id="status" [(ngModel)]="mesaAtual.status" name="status">
	              <option value="disponivel">DisponÃ­vel</option>
	              <option value="ocupada">Ocupada</option>
	              <option value="reservada">Reservada</option>
	            </select>
	          </div>

	          <div class="form-group checkbox">
	            <label class="checkbox-label">
	              <input 
	                type="checkbox" 
	                [(ngModel)]="mesaAtual.ativo" 
	                name="ativo"
	              />
	              <span>Mesa ativa</span>
	            </label>
	          </div>
	        </div>

	        <div class="modal-footer">
	          <button type="button" class="btn-secondary" (click)="fecharFormulario()">
	            Cancelar
	          </button>
	          <button type="submit" class="btn-primary">
	            {{ editando ? 'Atualizar' : 'Criar' }}
	          </button>
	        </div>
	      </form>
	    </div>
	  </div>
</div>
