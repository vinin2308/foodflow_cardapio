<div class="carrinho-overlay" (click)="onFechar()">
  <div class="carrinho-sidebar" (click)="$event.stopPropagation()">
    <!-- Header do Carrinho -->
    <div class="carrinho-header">
      <h3>üõí Seu Pedido</h3>
      <button class="btn-fechar" (click)="onFechar()" id="fechar-carrinho">√ó</button>
    </div>

    <!-- Informa√ß√µes da Mesa -->
    <div class="mesa-info" *ngIf="comanda">
      <span class="mesa">Mesa {{ comanda.mesa }}</span>
      <span class="status" [class]="comanda.status">{{ getStatusTexto(comanda.status) }}</span>
    </div>

    <!-- Lista de Itens -->
    <div class="carrinho-content">
      <div *ngIf="carrinhoVazio" class="carrinho-vazio">
        <div class="vazio-icon">üõí</div>
        <p>Seu carrinho est√° vazio</p>
        <small>Adicione itens do card√°pio para come√ßar seu pedido</small>
      </div>

      <div *ngIf="!carrinhoVazio" class="itens-lista">
        <div class="item-carrinho" *ngFor="let item of comanda?.itens">
          <ng-container *ngIf="getPratoPorId(item.prato) as pratoCompleto">
            <div class="item-info">
              <h4>{{ pratoCompleto.nome }}</h4>
              <p class="item-preco">{{ formatarPreco(pratoCompleto.preco) }}</p>
              <p class="item-observacao" *ngIf="item.observacao">
                <em>Obs: {{ item.observacao }}</em>
              </p>
            </div>

            <div class="item-controles">
              <div class="quantidade-controles">
                <button 
                  class="btn-quantidade" 
                  (click)="diminuirQuantidade(item.prato, item.observacao)"
                  [disabled]="item.quantidade <= 1"
                  id="diminuir-quantidade"
                >
                  -
                </button>
                <span class="quantidade">{{ item.quantidade }}</span>
                <button 
                  class="btn-quantidade" 
                  (click)="adicionarItem(item.prato, 1,item.observacao)"
                  id="aumentar-quantidade"
                >
                  +
                </button>
              </div>

              <div class="item-subtotal">
                {{ formatarPreco(calcularSubtotal(item)) }}
              </div>

              <button 
                class="btn-remover" 
                (click)="removerItem(item.prato, item.observacao)"
                title="Remover item"
                id="remover-item"
              >
                üóëÔ∏è
              </button>
            </div>
          </ng-container>
        </div>
      </div>
    </div>

    <!-- Footer com Total e Bot√£o de Confirmar -->
    <div class="carrinho-footer" *ngIf="!carrinhoVazio">
      <div class="resumo-pedido">
        <div class="linha-resumo">
          <span>Itens ({{ quantidadeTotalItens }})</span>
          <span>{{ formatarPreco(calcularTotal()) }}</span>
        </div>
        <div class="linha-total">
          <strong>Total</strong>
          <strong>{{ formatarPreco(calcularTotal()) }}</strong>
        </div>
      </div>

      <button 
        class="btn-confirmar"
        (click)="confirmarPedido()"
        [disabled]="confirmandoPedido"
        id="confirmar-pedido"
      >
        <span *ngIf="!confirmandoPedido">Confirmar Pedido</span>
        <span *ngIf="confirmandoPedido">Confirmando...</span>
      </button>
    </div>
  </div>
</div>
