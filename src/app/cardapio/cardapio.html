<div class="cardapio-container">
  <!-- Header -->
  <header class="cardapio-header">
    <div class="header-info">
      <h1>FoodFlow</h1>
      <div class="mesa-info">
        <span class="mesa">Mesa {{ mesa }}</span>
        <span class="cliente" *ngIf="nomeCliente">{{ nomeCliente }}</span>
      </div>
    </div>
    
    <!-- C√≥digo da Comanda -->
<div class="comanda-info" *ngIf="comanda">
  <span class="codigo-acesso">
    <ng-container *ngIf="comanda.eh_principal; else comandaFilha">
      Comanda principal ‚Ä¢ C√≥digo: <strong>{{ codigoAcesso }}</strong>
    </ng-container>
    <ng-template #comandaFilha>
      Comanda vinculada ‚Ä¢ C√≥digo: <strong>{{ codigoAcesso }}</strong>
    </ng-template>
  </span>
</div>


    <!-- Bot√£o do Carrinho -->
    <button class="carrinho-btn" (click)="toggleCarrinho()" id="abrir-carrinho">
      üõí
      <span class="badge" *ngIf="quantidadeTotalItens > 0">{{ quantidadeTotalItens }}</span>
    </button>
  </header>

  <!-- Navega√ß√£o de Categorias -->
  <nav class="categorias-nav">
    <button 
      *ngFor="let categoria of categorias"
      class="categoria-btn"
      [class.ativa]="categoriaAtiva?.id === categoria.id"
      (click)="selecionarCategoria(categoria)"
      [attr.id]="'categoria-' + categoria.id"
    >
      <span class="icone">{{ categoria.icone }}</span>
      <span class="nome">{{ categoria.nome }}</span>
    </button>
  </nav>

  <!-- Lista de Itens -->
  <main class="cardapio-content">
    <div class="categoria-section" *ngIf="categoriaAtiva">
      <h2 class="categoria-titulo">
        {{ categoriaAtiva.icone }} {{ categoriaAtiva.nome }}
      </h2>

      <div class="itens-grid">
        <div 
          class="item-card" 
          *ngFor="let item of getItensPorCategoria(categoriaAtiva)"
        >
          <div class="item-info">
            <h3 class="item-nome">{{ item.nome }}</h3>
            <p class="item-descricao">{{ item.descricao }}</p>
            <span class="item-preco">{{ formatarPreco(item.preco) }}</span>
          </div>

          <div class="item-actions">
            <button 
              class="btn-observacao" 
              (click)="abrirModalObservacao(item)"
              title="Adicionar observa√ß√£o"
              [attr.id]="'adicionar-observacao-' + item.id"
            >
              ‚úèÔ∏è
            </button>
            <button 
              class="btn-adicionar" 
              (click)="adicionarItem(item)"
              [attr.id]="'adicionar-item-' + item.id"
            >
              + Adicionar
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Componente do Carrinho -->
  <app-carrinho 
    *ngIf="carrinhoAberto"
     
    (fechar)="toggleCarrinho()"
  ></app-carrinho>

  <!-- Modal de Observa√ß√£o -->
  <app-observacao-modal
    *ngIf="mostrarModalObservacao"
    [item]="itemSelecionadoParaObservacao"
    (confirmar)="adicionarItemComObservacao($event)"
    (cancelar)="fecharModalObservacao()"
  ></app-observacao-modal>
</div>